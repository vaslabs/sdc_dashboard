{% extends "base.html" %}
{% block head %}
<title>My dashboard</title>
{% endblock %}
{% block scripts %}


    <link rel="stylesheet" href="/static/css/progress_bar.css" />
    <script src="/static/js/map_utils.js"></script>
    <script src="/static/js/graph_utils.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
    <script type="text/javascript">

      function getMyData() {
        getJSONResponse('/dashboard/session', initialize);
      }

      var map;
      var myData;
      function initialize(data) {
        var latitude = data.gpsEntries[0].latitude;
        var longitude = data.gpsEntries[0].longitude;
        var mapOptions = {
          center: { lat: latitude, lng: longitude},
          zoom: 16
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        myData = data;
        setUpControlPanel();
      }
      google.maps.event.addDomListener(window, 'load', getMyData);
    </script>
    <script type="text/javascript">
      

      function setUpControlPanel() {
        $('#session-path-button').click(function() {
          drawPath(myData);
        });

        $('#animation-button').click(function() {
          startAnimating(myData);
        });
        $('#real-speed-button').click(function() {
          speed = 1;
        });
        $('#fast-forward-button').click(function() {
          speed = 100;
        });
      }

        
    </script>
{% endblock %}
{% block content %}
    
<div class="row fullHeight fullWidth">
  <div class="large-10 medium-8 small-8 columns fullHeight">
    <div id="map-canvas"></div>
  </div>
    <div class="large-2 medium-4 small-4 columns fullHeight">
       <div id="control-panel" class="fullHeight">
          <div class="row">
            <div class="small-12 columns">
              <h3>Status</h3>
            </div>
            <div class="small-12 columns" style="min-height: 64px;">
              <p class="centeredImage"><img id="status-image" /></p>
            </div>
          </div>
          <div class="row">
            <div id="session-path-button" class="medium-12 columns medium round success button">Draw your session path</div>
          </div>
          <div class="row">
            <div id="animation-button" class="medium-12 columns medium round button">Show animation</div>
          </div>
          <div class="row">
            <a href="/dashboard/graphs" class="medium-12 columns medium round alert button">View charts</a>
          </div>
          <div class="row">
            <div id="real-speed-button" class="medium-6 small-12 columns medium round button">Real speed</div>

            <div id="fast-forward-button" class="medium-6 small-12 columns medium round success button">Fast forward</div>
          </div>

          <div class="row">
            <div class="medium-8 columns">
              <div class="callout panel" style="margin-top: 33%">
                <p id="current-altitude"></p>
              </div>
            </div>
            <div class="medium-4 columns">
              <div class="skill">
                  <div class="outer">
                      <div id="progress_bar" class="inner" data-progress="0%">
                          <div></div>
                      </div>        
                  </div>
              </div>
            </div>
          </div>
       </div>
    </div>
  </div>
</div>
{% endblock content %}